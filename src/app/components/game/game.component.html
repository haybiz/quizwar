<div class="game-container">
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="question-counter">
            <span class="counter-num">{{ currentQuestionNum() }}</span>
            <span class="counter-sep">/</span>
            <span class="counter-total">{{ totalQuestions() }}</span>
        </div>
        <div class="timer" [class]="getTimerClass()">
            <span class="timer-icon">‚è±Ô∏è</span>
            <span class="timer-value">{{ timeRemaining() }}</span>
        </div>
    </div>

    <!-- Timer Bar -->
    <div class="timer-bar-wrapper">
        <div class="timer-bar" [class]="getTimerClass()" [style.width.%]="getTimerWidth()"></div>
    </div>

    <div class="game-layout">
        <!-- Main Game Area -->
        <div class="main-area">
            @if (room()?.status === 'countdown') {
            <!-- COUNTDOWN SCREEN -->
            <div class="countdown-screen">
                <h2 class="countdown-title">Get Ready!</h2>
                <div class="countdown-number">{{ countdownRemaining() || 1 }}</div>
                <p class="countdown-subtitle">Battle starting soon...</p>
            </div>
            } @else if (currentQuestion(); as q) {
            <!-- GAMEPLAY SCREEN -->
            <div class="header">
                <div class="question-counter">
                    Question {{ currentQuestionNum() }} / {{ totalQuestions() }}
                </div>
                <div class="question-category">
                    {{ q.category }}
                </div>
            </div>

            <div class="question-card">
                <p class="question-text">{{ q.question }}</p>
            </div>

            <div class="answers-grid">
                @for (answer of q.answers; track $index) {
                <button class="answer-btn {{ getAnswerClass(answer) }}"
                    [disabled]="hasAnswered() || timeRemaining() <= 0" (click)="selectAnswer(answer)">
                    <span class="answer-label">{{ getAnswerLabel($index) }}</span>
                    <span class="answer-text">{{ answer }}</span>
                </button>
                }
            </div>

            @if (hasAnswered() && !showingResults()) {
            <div class="feedback locked-in">
                üîí Answer locked in! Waiting for other players...
            </div>
            }

            @if (showingResults()) {
            <div class="feedback results-shown">
                @if (currentPlayerData().isCorrect) {
                ‚úÖ Correct!
                @if (isFastest(currentPlayerId())) {
                <span class="fastest-badge">‚ö° Fastest!</span>
                }
                } @else if (selectedAnswer()) {
                ‚ùå Wrong answer
                } @else {
                ‚è∞ Time's up!
                }
                <span class="next-hint">Next question coming up...</span>
            </div>
            }
            } @else {
            <div class="loading-question">
                <div class="spinner-lg"></div>
                <p>Loading question...</p>
            </div>
            }
        </div>

    </div>
</div>